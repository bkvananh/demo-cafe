<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản Lý Món</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/admin.js"></script>
    <script>checkGatekeeper();</script>
</head>
<body id="admin-body">
    <div id="admin-sidebar"></div> <div id="admin-content">
        <h2>Quản Lý Món</h2>
        <div class="form-box">
            <h4>Thêm Món Mới</h4>
            <div style="display:flex; gap:10px;">
                <input id="name" placeholder="Tên món">
                <input id="price" type="number" placeholder="Giá">
                <select id="cat" style="padding:10px; border:1px solid #ddd; border-radius:4px;">
                    <option value="phin">Phin</option>
                    <option value="espresso">Espresso</option>
                    <option value="cold_brew">Cold Brew</option>
                </select>
            </div>
            <input id="img" placeholder="Link ảnh (Unsplash URL)">
            <button onclick="add()" class="btn-primary">THÊM</button>
        </div>
        <table class="admin-table">
            <thead><tr><th>Ảnh</th><th>Tên</th><th>Giá</th><th>Xóa</th></tr></thead>
            <tbody id="list"></tbody>
        </table>
    </div>
    <script src="js/db.js"></script>
    <script src="js/components.js"></script>
    <script>
        function render() {
            document.getElementById('list').innerHTML = getData(PRODUCTS_KEY).map(p => `
                <tr>
                    <td><img src="${p.img}" style="width:50px; height:50px;"></td>
                    <td>${p.name}</td>
                    <td>${p.price}</td>
                    <td><button onclick="del(${p.id})" style="color:red; border:none; background:none; cursor:pointer;">Xóa</button></td>
                </tr>`).join('');
        }
        function add() {
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const cat = document.getElementById('cat').value;
            const img = document.getElementById('img').value || 'https://placehold.co/100';
            if(name) { addData(PRODUCTS_KEY, {name, price: Number(price), category: cat, img}); render(); }
        }
        function del(id) { if(confirm('Xóa?')) { deleteData(PRODUCTS_KEY, id); render(); } }
        render();
    </script>
</body>
</html>
