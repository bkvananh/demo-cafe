<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản Lý Blog</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/admin.js"></script>
    <script>checkGatekeeper();</script>
</head>
<body id="admin-body">
    <div id="admin-sidebar"></div>
    <div id="admin-content">
        <h2>Quản Lý Bài Viết</h2>
        <div class="form-box">
            <input id="title" placeholder="Tiêu đề">
            <input id="date" type="date">
            <input id="img" placeholder="Link ảnh">
            <textarea id="desc" placeholder="Nội dung..."></textarea>
            <button onclick="add()" class="btn-primary">ĐĂNG BÀI</button>
        </div>
        <table class="admin-table">
            <tbody id="list"></tbody>
        </table>
    </div>
    <script src="js/db.js"></script>
    <script src="js/components.js"></script>
    <script>
        function render() {
            document.getElementById('list').innerHTML = getData(BLOG_KEY).map(p => `
                <tr>
                    <td><img src="${p.img}" style="width:60px;"></td>
                    <td><b>${p.title}</b><br>${p.desc}</td>
                    <td>${p.date}</td>
                    <td><button onclick="del(${p.id})" style="color:red; border:none; background:none; cursor:pointer;">Xóa</button></td>
                </tr>`).join('');
        }
        function add() {
            const title = document.getElementById('title').value;
            const desc = document.getElementById('desc').value;
            const date = document.getElementById('date').value;
            const img = document.getElementById('img').value || 'https://placehold.co/100';
            if(title) { addData(BLOG_KEY, {title, desc, date, img}); render(); }
        }
        function del(id) { if(confirm('Xóa?')) { deleteData(BLOG_KEY, id); render(); } }
        render();
    </script>
</body>
</html>
