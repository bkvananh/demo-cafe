<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Hộp Thư</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/admin.js"></script>
    <script>checkGatekeeper();</script>
</head>
<body id="admin-body">
    <div id="admin-sidebar"></div>
    <div id="admin-content">
        <h2>Hộp Thư Khách Hàng</h2>
        <table class="admin-table">
            <thead><tr><th>Tên</th><th>Liên hệ</th><th>Nội dung</th><th>Ngày</th><th>Xóa</th></tr></thead>
            <tbody id="list"></tbody>
        </table>
        <p id="empty" style="text-align:center; margin-top:20px; display:none;">Chưa có tin nhắn.</p>
    </div>
    <script src="js/db.js"></script>
    <script src="js/components.js"></script>
    <script>
        const list = getData(CONTACTS_KEY);
        if(!list.length) document.getElementById('empty').style.display = 'block';
        document.getElementById('list').innerHTML = list.map(c => `
            <tr>
                <td>${c.name}</td>
                <td>${c.contact}</td>
                <td>${c.message}</td>
                <td>${c.date}</td>
                <td><button onclick="del(${c.id})" style="color:red; border:none; background:none; cursor:pointer;">Xóa</button></td>
            </tr>`).join('');
        
        function del(id) { if(confirm('Xóa?')) { deleteData(CONTACTS_KEY, id); location.reload(); } }
    </script>
</body>
</html>
